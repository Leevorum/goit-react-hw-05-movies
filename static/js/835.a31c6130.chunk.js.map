{"version":3,"file":"static/js/835.a31c6130.chunk.js","mappings":"qLACA,EAAwB,+BAAxB,EAAqE,qCAArE,EAAkH,+BAAlH,EAAyJ,+B,SCK1I,SAASA,EAAT,GAAqC,IAAD,IAATC,EAAS,EAATA,MAClCC,EAAK,UAHG,mCAGH,OAAgBD,EAAME,aAE3BC,EAAWC,KAAKC,MAA2B,GAArBL,EAAMM,cAElC,OACE,4BACE,gBACEC,IANU,wCAMLN,EAAoBA,EAAQO,EACjCC,IAAG,iBAAET,QAAF,IAAEA,OAAF,EAAEA,EAAOU,aAAT,eAAkBV,QAAlB,IAAkBA,OAAlB,EAAkBA,EAAOW,KAC5BC,UAAWC,KAEb,iBAAKD,UAAWC,EAAhB,WACE,cAAGD,UAAWC,EAAd,0BAAwBb,QAAxB,IAAwBA,OAAxB,EAAwBA,EAAOU,aAA/B,eAAwCV,QAAxC,IAAwCA,OAAxC,EAAwCA,EAAOW,QAC/C,eAAGC,UAAWC,EAAd,uBAAkCV,EAAlC,e,6JCnBR,EAAgC,oCAAhC,EAAoF,oCAApF,EAAqI,iCAArI,EAAiL,+BAAjL,EAA6N,iCAA7N,EAAiR,uCAAjR,EAAgV,4CAAhV,EAA8Y,sC,SCM/X,SAASW,IAAgB,IAAD,EACrC,GAA0BC,EAAAA,EAAAA,UAAS,IAAnC,eAAOC,EAAP,KAAcC,EAAd,KACA,GAAsCF,EAAAA,EAAAA,UAAS,IAA/C,eAAOG,EAAP,KAAoBC,EAApB,KACA,GAA4BJ,EAAAA,EAAAA,UAAS,IAArC,eAAOK,EAAP,KAAeC,EAAf,KACA,GAAoCN,EAAAA,EAAAA,WAAS,GAA7C,eAAOO,EAAP,KAAmBC,EAAnB,KACMC,GAAWC,EAAAA,EAAAA,MACjB,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACMC,EAAU,UAAGF,EAAaG,IAAI,sBAApB,QAAsC,IAKtDC,EAAAA,EAAAA,YAAU,WACgB,KAApBP,EAASQ,SACXJ,EAAgBJ,EAASQ,QACzBb,EAAeU,MAEhB,CAACL,EAASQ,OAAQH,EAAYD,KAWjCG,EAAAA,EAAAA,YAAU,WACR,IAiB0BpB,EAjBpBsB,EAAS,mCAAG,gGAEM,KAAhBf,EAFU,kEAKegB,EAAAA,EAAAA,IAAchB,GAL7B,UAM6B,KADrCiB,EALQ,QAMKC,KAAKC,QAAQC,OANlB,wBAOZC,MAAM,oCACNlB,EAAU,IARE,2BAWdA,EAAUc,EAAeC,KAAKC,SAXhB,kDAadd,GAAc,GAbA,0DAAH,qDAuBfU,IAHEL,EAF4B,MADJjB,EAORO,GANiB,CAAEsB,YAAa7B,GAAS,MAO1D,CAACkB,EAAYX,EAAaU,IAe7B,OACE,4BACE,gBAAKhB,UAAWC,EAAhB,UACE,kBAAMD,UAAWC,EAAc4B,SAZhB,SAAAC,GACnBA,EAAIC,iBACU,KAAV3B,IAGJG,EAAeH,GACfC,EAAS,MAML,WACE,mBAAQ2B,KAAK,SAAShC,UAAWC,EAAjC,UACE,iBAAMD,UAAWC,EAAjB,uBAGF,kBACED,UAAWC,EACXF,KAAK,QACLkC,MAAO7B,EACP4B,KAAK,OACLE,aAAa,MACbC,WAAS,EACTC,YAAY,gBACZC,SA7BW,SAAAP,GACnBzB,EAASyB,EAAIQ,OAAOL,gBAgClB,gBAAKjC,UAAWC,EAAhB,UACE,eAAID,UAAWC,EAAf,SACGO,GACCA,EAAO+B,KAAI,SAAAnD,GAAK,OACd,eAAmBY,UAAWC,EAA9B,UACE,SAAC,KAAD,CAAMuC,GAAE,kBAAapD,EAAMqD,IAAMC,MAAO,CAAEC,KAAM/B,GAAhD,UACE,SAACzB,EAAA,EAAD,CAAiBC,MAAOA,OAFnBA,EAAMqD,WAQtB/B,IAAc,8E,0MC1GfkC,EAAU,mCAET,SAAetB,EAAtB,+CAAO,OAAP,oBAAO,WAA6BuB,GAA7B,iFACQC,IAAAA,IAAA,4DAC0CF,EAD1C,iCAC0EC,EAD1E,gCADR,0GAMA,SAAeE,IAAtB,4CAAO,OAAP,oBAAO,8FACQD,IAAAA,IAAA,gEAC8CF,IAFtD,0GAMA,SAAeI,EAAtB,+CAAO,OAAP,oBAAO,WAAiCC,GAAjC,iFACQH,IAAAA,IAAA,6CAC2BG,EAD3B,oBAC8CL,EAD9C,oBADR,0GAKA,SAAeM,EAAtB,+CAAO,OAAP,oBAAO,WAAqCD,GAArC,iFACQH,IAAAA,IAAA,6CAC2BG,EAD3B,4BACsDL,EADtD,oBADR,0GAKA,SAAeO,EAAtB,+CAAO,OAAP,oBAAO,WAAwCF,GAAxC,iFACQH,IAAAA,IAAA,6CAC2BG,EAD3B,4BACsDL,EADtD,2BADR,4G","sources":["webpack://goit-react-hw-05-movies/./src/components/MoviesSmallCard/MoviesSmallCard.module.css?fedd","components/MoviesSmallCard/MoviesSmallCard.jsx","webpack://goit-react-hw-05-movies/./src/pages/SearchMovies/searchMovies.module.css?d381","pages/SearchMovies/SearchMovies.jsx","service/api-service.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"image\":\"MoviesSmallCard_image__iSmNo\",\"textWrapper\":\"MoviesSmallCard_textWrapper__zUZrl\",\"title\":\"MoviesSmallCard_title__WprdU\",\"score\":\"MoviesSmallCard_score__WnGhu\"};","import logo from '../images/dummy_image.png';\nimport s from './MoviesSmallCard.module.css';\nimport PropTypes from 'prop-types';\n\nconst baseUrl = 'https://image.tmdb.org/t/p/w400';\n\nexport default function MoviesSmallCard({ movie }) {\n  const image = `${baseUrl}${movie.poster_path}`;\n  const noImage = 'https://image.tmdb.org/t/p/w400null';\n  const useScore = Math.round(movie.vote_average * 10);\n\n  return (\n    <div>\n      <img\n        src={image !== noImage ? image : logo}\n        alt={movie?.title ?? movie?.name}\n        className={s.image}\n      ></img>\n      <div className={s.textWrapper}>\n        <p className={s.title}>{movie?.title ?? movie?.name}</p>\n        <p className={s.score}>UserScore {useScore}%</p>\n      </div>\n    </div>\n  );\n}\n\nMoviesSmallCard.propTypes = {\n  movie: PropTypes.object.isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"searchWrapper\":\"searchMovies_searchWrapper__9ua9U\",\"moviesWrapper\":\"searchMovies_moviesWrapper__Bc8Fw\",\"moviesList\":\"searchMovies_moviesList__GcQAV\",\"listItem\":\"searchMovies_listItem__XClsq\",\"SearchForm\":\"searchMovies_SearchForm__x17HE\",\"SearchFormButton\":\"searchMovies_SearchFormButton__xrYAS\",\"SearchFormButtonLabel\":\"searchMovies_SearchFormButtonLabel__XAV5K\",\"SearchFormInput\":\"searchMovies_SearchFormInput__vmI1O\"};","import { useEffect } from 'react';\nimport { useState } from 'react';\nimport { Link, useLocation, useSearchParams } from 'react-router-dom';\nimport { searchhMovies } from '../../service/api-service';\nimport MoviesSmallCard from 'components/MoviesSmallCard/MoviesSmallCard';\nimport s from './searchMovies.module.css';\n\nexport default function SearchMovies() {\n  const [input, setInput] = useState('');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [movies, setMovies] = useState([]);\n  const [fetchError, setFetchError] = useState(false);\n  const location = useLocation();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const queryInput = searchParams.get('searchquery') ?? '';\n  // const prevSearch = new URLSearchParams(location.search).get('searchquery');\n\n  // console.log(location);\n  // rewrite searchquery if back from details to search\n  useEffect(() => {\n    if (location.search !== '') {\n      setSearchParams(location.search);\n      setSearchQuery(queryInput);\n    }\n  }, [location.search, queryInput, setSearchParams]);\n\n  // rewrite searchquery if back from details to search\n  // useEffect(() => {\n\n  //   if (prevSearch !== null) {\n  //     setSearchParams(prevSearch);\n  //     setSearchQuery(queryInput);\n  //   }\n  // }, [ prevSearch, queryInput, setSearchParams]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        if (searchQuery === '') {\n          return;\n        }\n        const moviesResponse = await searchhMovies(searchQuery);\n        if (moviesResponse.data.results.length === 0) {\n          alert('There is no movie with this name');\n          setMovies([]);\n          return;\n        }\n        setMovies(moviesResponse.data.results);\n      } catch (error) {\n        setFetchError(true);\n      }\n    };\n\n    const updateQueryString = name => {\n      const nextParams = name !== '' ? { searchquery: name } : {};\n\n      setSearchParams(nextParams);\n    };\n\n    fetchData();\n    updateQueryString(searchQuery);\n  }, [queryInput, searchQuery, setSearchParams]);\n\n  const handleChange = evt => {\n    setInput(evt.target.value);\n  };\n\n  const handleSubmit = evt => {\n    evt.preventDefault();\n    if (input === '') {\n      return;\n    }\n    setSearchQuery(input);\n    setInput('');\n  };\n\n  return (\n    <div>\n      <div className={s.searchWrapper}>\n        <form className={s.SearchForm} onSubmit={handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            name=\"input\"\n            value={input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search movies\"\n            onChange={handleChange}\n          />\n        </form>\n      </div>\n      <div className={s.moviesWrapper}>\n        <ul className={s.moviesList}>\n          {movies &&\n            movies.map(movie => (\n              <li key={movie.id} className={s.listItem}>\n                <Link to={`/movies/${movie.id}`} state={{ from: location }}>\n                  <MoviesSmallCard movie={movie} />\n                </Link>\n              </li>\n            ))}\n        </ul>\n      </div>\n      {fetchError && <p>Somthing goes wrong! Let's try again later...</p>}\n    </div>\n  );\n}\n","import axios from 'axios';\n\nconst API_KEY = '4cfbca3d61713e2ef2c4275dd6982dc3';\n\nexport async function searchhMovies(queryName) {\n  return await axios.get(\n    `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&language=en-US&query=${queryName}&page=1&include_adult=false`,\n  );\n}\n\nexport async function fetchTrendingMovies() {\n  return await axios.get(\n    `https://api.themoviedb.org/3/trending/all/day?api_key=${API_KEY}`,\n  );\n}\n\nexport async function fetchMovieDetails(movieId) {\n  return await axios.get(\n    `https://api.themoviedb.org/3/movie/${movieId}?api_key=${API_KEY}&language=en-US`,\n  );\n}\nexport async function fetchCastMovieDetails(movieId) {\n  return await axios.get(\n    `https://api.themoviedb.org/3/movie/${movieId}/credits?api_key=${API_KEY}&language=en-US`,\n  );\n}\nexport async function fetchReviewsMovieDetails(movieId) {\n  return await axios.get(\n    `https://api.themoviedb.org/3/movie/${movieId}/reviews?api_key=${API_KEY}&language=en-US&page=1`,\n  );\n}\n"],"names":["MoviesSmallCard","movie","image","poster_path","useScore","Math","round","vote_average","src","logo","alt","title","name","className","s","SearchMovies","useState","input","setInput","searchQuery","setSearchQuery","movies","setMovies","fetchError","setFetchError","location","useLocation","useSearchParams","searchParams","setSearchParams","queryInput","get","useEffect","search","fetchData","searchhMovies","moviesResponse","data","results","length","alert","searchquery","onSubmit","evt","preventDefault","type","value","autoComplete","autoFocus","placeholder","onChange","target","map","to","id","state","from","API_KEY","queryName","axios","fetchTrendingMovies","fetchMovieDetails","movieId","fetchCastMovieDetails","fetchReviewsMovieDetails"],"sourceRoot":""}